<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Felipe Fontana Vieira">
<meta name="author" content="Jason Geller">
<meta name="author" content="Bruno Rodrigues">
<meta name="keywords" content="reproducibility, Nix, simulation studies, R, computational methods">
<meta name="description" content="REPRODUCIBILITY WITH RIX">

<title>Why Risk it, When You Can {rix} it: A Tutorial for Computational Reproducibility Focused on Simulation Studies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="article_files/libs/clipboard/clipboard.min.js"></script>
<script src="article_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="article_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="article_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="article_files/libs/quarto-html/popper.min.js"></script>
<script src="article_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="article_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="article_files/libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="article_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="article_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="article_files/libs/bootstrap/bootstrap-79f10921a22c9001ae004b97f5ab471a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="_extensions/wjschne/apaquarto/apa.css">
</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#a-practical-example-setting-up-a-reproducible-simulation-study-with-rix" id="toc-a-practical-example-setting-up-a-reproducible-simulation-study-with-rix" class="nav-link active" data-scroll-target="#a-practical-example-setting-up-a-reproducible-simulation-study-with-rix">A Practical Example: Setting up a Reproducible Simulation Study with {rix}</a></li>
  <li><a href="#nix-and-rix-a-comprehensive-solution" id="toc-nix-and-rix-a-comprehensive-solution" class="nav-link" data-scroll-target="#nix-and-rix-a-comprehensive-solution">Nix and {rix}: A Comprehensive Solution</a>
  <ul class="collapse">
  <li><a href="#core-principles" id="toc-core-principles" class="nav-link" data-scroll-target="#core-principles">Core Principles</a></li>
  <li><a href="#the-rix-package-r-interface-to-nix" id="toc-the-rix-package-r-interface-to-nix" class="nav-link" data-scroll-target="#the-rix-package-r-interface-to-nix">The {rix} Package: R Interface to Nix</a></li>
  <li><a href="#step-i-installing-nix-and-rix" id="toc-step-i-installing-nix-and-rix" class="nav-link" data-scroll-target="#step-i-installing-nix-and-rix">Step I: Installing Nix and {rix}</a></li>
  <li><a href="#sec-specifying-environment" id="toc-sec-specifying-environment" class="nav-link" data-scroll-target="#sec-specifying-environment">Step II: Specifying the Computational Environment</a>
  <ul class="collapse">
  <li><a href="#the-environment-generation-script" id="toc-the-environment-generation-script" class="nav-link" data-scroll-target="#the-environment-generation-script">The Environment Generation Script</a></li>
  </ul></li>
  <li><a href="#generating-the-environment-specification" id="toc-generating-the-environment-specification" class="nav-link" data-scroll-target="#generating-the-environment-specification">Generating the Environment Specification</a></li>
  <li><a href="#step-iii-building-and-using-the-reproducible-environment" id="toc-step-iii-building-and-using-the-reproducible-environment" class="nav-link" data-scroll-target="#step-iii-building-and-using-the-reproducible-environment">Step III: Building and Using the Reproducible Environment</a></li>
  <li><a href="#reproducing-the-complete-manuscript3" id="toc-reproducing-the-complete-manuscript3" class="nav-link" data-scroll-target="#reproducing-the-complete-manuscript3">Reproducing the Complete Manuscript</a>
  <ul class="collapse">
  <li><a href="#reproducing-the-simulation-and-results" id="toc-reproducing-the-simulation-and-results" class="nav-link" data-scroll-target="#reproducing-the-simulation-and-results">Reproducing the Simulation and Results</a></li>
  </ul></li>
  <li><a href="#additional-considerations-for-advanced-workflows" id="toc-additional-considerations-for-advanced-workflows" class="nav-link" data-scroll-target="#additional-considerations-for-advanced-workflows">Additional Considerations for Advanced Workflows</a>
  <ul class="collapse">
  <li><a href="#workflow-orchestration-targets-and-rixpress" id="toc-workflow-orchestration-targets-and-rixpress" class="nav-link" data-scroll-target="#workflow-orchestration-targets-and-rixpress">Workflow Orchestration: {targets} and {rixpress}</a></li>
  <li><a href="#converting-existing-renv-projects" id="toc-converting-existing-renv-projects" class="nav-link" data-scroll-target="#converting-existing-renv-projects">Converting Existing {renv} Projects</a></li>
  <li><a href="#containerization-with-docker" id="toc-containerization-with-docker" class="nav-link" data-scroll-target="#containerization-with-docker">Containerization with Docker</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li>Appendix A</li>
  <li><a href="#apx-simulation-study-design" id="toc-apx-simulation-study-design" class="nav-link" data-scroll-target="#apx-simulation-study-design">Simulation Study Design</a></li>
  <li>Appendix B</li>
  <li><a href="#apx-clarifying-the-packages-used" id="toc-apx-clarifying-the-packages-used" class="nav-link" data-scroll-target="#apx-clarifying-the-packages-used">Clarifying the packages used</a>
  <ul class="collapse">
  <li><a href="#r-packages" id="toc-r-packages" class="nav-link" data-scroll-target="#r-packages">R Packages</a>
  <ul class="collapse">
  <li><a href="#reproducibility-infrastructure" id="toc-reproducibility-infrastructure" class="nav-link" data-scroll-target="#reproducibility-infrastructure">Reproducibility Infrastructure</a></li>
  <li><a href="#simulation-study" id="toc-simulation-study" class="nav-link" data-scroll-target="#simulation-study">Simulation Study</a></li>
  <li><a href="#dynamic-document-generation" id="toc-dynamic-document-generation" class="nav-link" data-scroll-target="#dynamic-document-generation">Dynamic Document Generation</a></li>
  </ul></li>
  <li><a href="#latex-packages" id="toc-latex-packages" class="nav-link" data-scroll-target="#latex-packages">LaTeX Packages</a>
  <ul class="collapse">
  <li><a href="#required-by-apaquarto-extension" id="toc-required-by-apaquarto-extension" class="nav-link" data-scroll-target="#required-by-apaquarto-extension">Required by apaquarto Extension</a></li>
  <li><a href="#dependencies-of-apaquarto-packages" id="toc-dependencies-of-apaquarto-packages" class="nav-link" data-scroll-target="#dependencies-of-apaquarto-packages">Dependencies of apaquarto Packages</a></li>
  <li><a href="#required-by-apa7-document-class" id="toc-required-by-apa7-document-class" class="nav-link" data-scroll-target="#required-by-apa7-document-class">Required by apa7 Document Class</a></li>
  <li><a href="#required-by-quarto-pdf-rendering" id="toc-required-by-quarto-pdf-rendering" class="nav-link" data-scroll-target="#required-by-quarto-pdf-rendering">Required by Quarto PDF Rendering</a></li>
  <li><a href="#additional-packages" id="toc-additional-packages" class="nav-link" data-scroll-target="#additional-packages">Additional Packages</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="article.pdf"><i class="bi bi-file-pdf"></i>PDF (apaquarto)</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">




<br>

<br>

<section id="title" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">Why Risk it, When You Can {rix} it: A Tutorial for Computational Reproducibility Focused on Simulation Studies</h1>
<div class="Author">
<br>

<p>Felipe Fontana Vieira<sup>1</sup>, Jason Geller<sup>2</sup>, and Bruno Rodrigues<sup>3</sup></p>
<p><sup>1</sup>Department of Data Analysis, Ghent University</p>
<p><sup>2</sup>Department of Psychology and Neuroscience, Boston College</p>
<p><sup>3</sup>Statistics and Data Strategy Departments, Ministry of Research and Higher Education, Luxembourg</p>
</div>
<br>

<br>

</section>
<section id="author-note" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Author Note</h1>
<p>Correspondence concerning this article should be addressed to Felipe Fontana Vieira, Department of Data Analysis, Ghent University, Email: <a href="mailto:felipe.fontanavieira@ugent.be">felipe.fontanavieira@ugent.be</a></p>
<br>
</section>
<section id="abstract" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Abstract</h1>
<p><em>Keywords</em>: reproducibility, Nix, simulation studies, R, computational methods</p>
<p><em>Word Count</em>: 5794</p>
<br>
</section>
<section id="firstheader" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">Why Risk it, When You Can {rix} it: A Tutorial for Computational Reproducibility Focused on Simulation Studies</h1>
<p>Psychological science is in the midst of a credibility revolution, which has prompted substantial progress in how research is conducted and evaluated <span class="citation" data-cites="vazire2018">(<a href="#ref-vazire2018" role="doc-biblioref">Vazire, 2018</a>)</span>. Yet, despite notable progress, a key cornerstone of science, reproducibility (i.e., the ability to precisely reproduce the results of a study or studies based on provided data, code, materials, and software/hardware) remains limited <span class="citation" data-cites="hardwicke2020">(<a href="#ref-hardwicke2020" role="doc-biblioref">Hardwicke et al., 2020</a>)</span>. Hence, ensuring reproducibility remains an open and pressing challenge for psychological science.</p>
<p>Addressing this gap is complicated by the fact that reproducibility is not a binary feature but instead exists along a continuum <span class="citation" data-cites="peng_2011">(<a href="#ref-peng_2011" role="doc-biblioref">Peng, 2011</a>)</span>. At the lower end, reproducibility may be interpreted as sharing only a manuscript. Further along the spectrum, it may involve providing partial code, complete analysis scripts, or publicly accessible datasets. At the highest level, reproducibility entails documenting a fully specified computational environment that allows others to recreate identical results—from raw data to final manuscript output—with minimal friction. As a result, researchers may implicitly target different points on this continuum, and efforts to improve reproducibility can diverge substantially in both goals and implementation.</p>
<p>Open science initiatives have made considerable progress in encouraging movement along this spectrum. For example, journals have begun offering open-science badges <span class="citation" data-cites="kidwell_etall_2016">(<a href="#ref-kidwell_etall_2016" role="doc-biblioref">Kidwell et al., 2016</a>)</span>, best practices for making data sharing routine have been developed <span class="citation" data-cites="levenstein_lyle_2018">(<a href="#ref-levenstein_lyle_2018" role="doc-biblioref">Levenstein &amp; Lyle, 2018</a>)</span>, and platforms like the Open Science Framework (OSF) <span class="citation" data-cites="nosek_etall_2015">(<a href="#ref-nosek_etall_2015" role="doc-biblioref">Nosek et al., 2015</a>)</span> have provided infrastructure for sharing and storing research materials. However, these efforts largely focus on the lower and middle portions of the continuum, emphasizing <em>what</em> is shared rather than <em>how</em> shared materials can be executed in practice.</p>
<p>Data and code are never fully self-sufficient to reproduce a set of findings <span class="citation" data-cites="peikert_brandmaier_2021 epskamp_2019 wiebels_moreau_2021">(<a href="#ref-epskamp_2019" role="doc-biblioref">Epskamp, 2019</a>; <a href="#ref-peikert_brandmaier_2021" role="doc-biblioref">Peikert &amp; Brandmaier, 2021</a>; <a href="#ref-wiebels_moreau_2021" role="doc-biblioref">Wiebels &amp; Moreau, 2021</a>)</span>. Assuming the data and code are error-free, reproducibility depends on a hierarchy of software components—collectively referred to as <em>dependencies</em>—including the programming language version, the packages used in the analysis, and the system libraries on which those packages rely. When these dependencies differ from those used in the original analysis, code may fail, behave inconsistently across machines, or yield conflicting numerical results <span class="citation" data-cites="baker_etall_2024 hodges_etall_2023 glatard_etall_2015 nosek_etall_2022">(<a href="#ref-baker_etall_2024" role="doc-biblioref">Baker et al., 2024</a>; <a href="#ref-glatard_etall_2015" role="doc-biblioref">Glatard et al., 2015</a>; <a href="#ref-hodges_etall_2023" role="doc-biblioref">Hodges et al., 2023</a>; <a href="#ref-nosek_etall_2022" role="doc-biblioref">Nosek et al., 2022</a>)</span>. These issues are particularly acute for simulation studies, which rely on complex codebases, versioned dependencies, and intricate software configurations <span class="citation" data-cites="luijken_etall_2024 siepe_etall_2024">(<a href="#ref-luijken_etall_2024" role="doc-biblioref">Luijken et al., 2024</a>; <a href="#ref-siepe_etall_2024" role="doc-biblioref">Siepe et al., 2024</a>)</span>.</p>
<p>To make this concrete, we use <em>computational environment</em> to refer to the complete software context required for an analysis to run successfully—the programming language version, package versions, system libraries, and operating system <span class="citation" data-cites="rodrigues_2023 rodrigues_baumann_2026_polyglot">(<a href="#ref-rodrigues_2023" role="doc-biblioref">Rodrigues, 2023</a>; <a href="#ref-rodrigues_baumann_2026_polyglot" role="doc-biblioref">Rodrigues &amp; Baumann, 2026</a>)</span>. We define <em>computational environment reproducibility</em> as the ability to reconstruct this entire set of software dependencies on any machine and at any future time, such that executing the same code yields the same numerical results. Empirical assessments show that current practice falls short of this ideal. <span class="citation" data-cites="siepe_etall_2024">Siepe et al. (<a href="#ref-siepe_etall_2024" role="doc-biblioref">2024</a>)</span> report that nearly two-thirds of simulation studies in psychology provide no accompanying code, and among those that do, documentation of the computational environment is rarely included. This gap is consequential: simulation studies inform methodological recommendations, meaning that insufficient reproducibility undermines confidence in those recommendations <span class="citation" data-cites="luijken_etall_2024 white_etall_2024">(<a href="#ref-luijken_etall_2024" role="doc-biblioref">Luijken et al., 2024</a>; <a href="#ref-white_etall_2024" role="doc-biblioref">White et al., 2024</a>)</span>.</p>
<p>Arguably, these challenges persist because researchers must navigate a fragmented landscape of solutions, each addressing only part of the problem. Package-level managers such as {renv} <span class="citation" data-cites="ushey_2024">(<a href="#ref-ushey_2024" role="doc-biblioref">Ushey, 2024</a>)</span> and {groundhog} <span class="citation" data-cites="simonsohn_2020">(<a href="#ref-simonsohn_2020" role="doc-biblioref">Simonsohn, 2020</a>)</span> stabilize R package versions but do not manage the R interpreter itself or the system-level libraries those packages depend on. Workflow orchestration tools such as {targets} <span class="citation" data-cites="landau_2021">(<a href="#ref-landau_2021" role="doc-biblioref">Landau, 2021</a>)</span> and Make <span class="citation" data-cites="feldman_1979">(<a href="#ref-feldman_1979" role="doc-biblioref">Feldman, 1979</a>)</span> support reproducibility in a different sense: they specify the structure of an analysis by formalizing the order in which steps should run and by tracking dependencies among intermediate results. These tools clarify <em>how</em> an analysis proceeds, but they assume that the software stack required to run each step is already stable. Containerization tools such as Docker, including R-focused implementations like Rocker <span class="citation" data-cites="boettiger_2015 boettiger_eddelbuettel_2017">(<a href="#ref-boettiger_2015" role="doc-biblioref">Boettiger, 2015</a>; <a href="#ref-boettiger_eddelbuettel_2017" role="doc-biblioref">Boettiger &amp; Eddelbuettel, 2017</a>)</span> offer a more comprehensive approach by bundling the full environment—operating system, system libraries, interpreter versions, and packages—into a single executable image. Yet their use requires familiarity with Linux system administration, and even containerization may suffer from temporal drift when Dockerfiles rely on mutable upstream repositories <span class="citation" data-cites="malka2024">(<a href="#ref-malka2024" role="doc-biblioref">Malka et al., 2024</a>)</span>. For a detailed comparison of these tools and their limitations, see <span class="citation" data-cites="rodrigues_baumann_2026_polyglot">Rodrigues and Baumann (<a href="#ref-rodrigues_baumann_2026_polyglot" role="doc-biblioref">2026</a>)</span>. Researchers thus face a difficult choice between solutions that are accessible but incomplete or approaches that are powerful but demand technical expertise.</p>
<p>In this article, therefore, we focus specifically on computational environment reproducibility as the foundation upon which other reproducibility practices depend. For that, we introduce Nix <span class="citation" data-cites="dolstra_etall_2004">(<a href="#ref-dolstra_etall_2004" role="doc-biblioref">Dolstra et al., 2004</a>)</span>, a functional software ecosystem designed to make software installation deterministic, and {rix} <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>, an R interface that allows researchers to use Nix without needing deep knowledge of its underlying language or infrastructure. Our main objective with the tutorial is not to introduce a specific workflow orchestration system or to prescribe a particular analytic structure. Instead, we aim to show what Nix and {rix} are and how they can establish a stable, cross-platform environment within which any simulation study—whether organized in simple, documented script sequences (e.g., .R files that <code>source()</code> others), through more formal orchestration tools (e.g., targets) or embedded as code chunks in <code>.Rmd</code> or <code>.qmd</code>—can be executed reliably.</p>
<p>We illustrate these ideas through a reproducible simulation study conducted in R, culminating in this automated APA-formatted manuscript generated with <code>apaquarto</code> <span class="citation" data-cites="schneider_2024">(<a href="#ref-schneider_2024" role="doc-biblioref">Schneider, 2024</a>)</span>. Although the example centers on R because of its prominence in psychological methodology, the principles underlying environment reproducibility apply equally to other languages, including Python and Julia, and to different development environments such as RStudio, VS Code, Emacs, or Positron. At the end of the article, we also briefly introduce {rixpress} <span class="citation" data-cites="rixpress">(<a href="#ref-rixpress" role="doc-biblioref">Rodrigues, 2025</a>)</span>, a workflow orchestration tool that builds on Nix to coordinate pipelines across R, Python, and Julia.</p>
</section>
<section id="a-practical-example-setting-up-a-reproducible-simulation-study-with-rix" class="level1">
<h1>A Practical Example: Setting up a Reproducible Simulation Study with {rix}</h1>
<p>Imagine you have just been awarded a grant to conduct a large-scale simulation study. The study is designed to evaluate the performance of a statistical estimator under varying data-generating conditions (see Appendix A for full technical details). This tutorial is organized around this scenario. We use this example to ground our discussion into a typical methods section, but readers can follow the tutorial without engaging deeply with the simulation itself.</p>
<p>In practice, simulation studies are typically organized into multiple component files, each corresponding to a distinct analytical stage, a modular structure that facilitates development and debugging. In our case, the simulation is organized into five sequential scripts: data generation (<code>01_data_generation.R</code>), model specification (<code>02_models.R</code>), simulation execution (<code>03_run_simulation.R</code>), performance metric calculation (<code>04_performance_metrics.R</code>), and results visualization (<code>05_plots.R</code>). However, because our focus is on the reproducibility of the <em>entire manuscript</em>, we embed all code directly within this document as executable chunks in a single <code>.qmd</code> file. When rendered, the simulation runs from start to finish, producing results and figures automatically. This approach would be impractical for many real-world simulation studies, which are often too computationally intensive. We return to this trade-off later in the tutorial.</p>
<p>Now suppose a researcher attempts to reproduce the simulation results reported in the article. What might prevent them from obtaining identical outcomes? The natural first concern is package versioning. Installing R packages at a later time may lead to errors if functions have been renamed or deprecated (e.g., <code>lavaan:::lav_utils_get_ancestors</code> renamed to <code>lavaan:::lav_graph_get_ancestors()</code>), or to subtly different results due to changes in default settings (e.g., <code>stringsAsFactors</code> defaulting to FALSE as of R 4.0) or numerical implementations. Beyond R packages themselves, many packages rely on system-level libraries that must be installed separately from R. Our simulation illustrates this dependency structure directly: the {rvinecopulib} package interfaces with a C++ backend and links against external libraries such as Boost, Eigen, and RcppThread <span class="citation" data-cites="rvinecopulib">(<a href="#ref-rvinecopulib" role="doc-biblioref">Nagler &amp; Vatter, 2025</a>)</span>.</p>
<p>The R language version introduces another layer of dependency. Code written for R 4.0 may rely on syntax or functionality that is unavailable in earlier versions (e.g., the native pipe <code>|&gt;</code> introduced in R 4.1). More subtly, changes to R’s random number generation across major versions mean that identical code executed with the same seed can nevertheless produce different random sequences <span class="citation" data-cites="ottoboni_stark_2018">(<a href="#ref-ottoboni_stark_2018" role="doc-biblioref">Ottoboni &amp; Stark, 2018</a>)</span>. For simulation studies, where specific random draws often underpin reported results, this version sensitivity is consequential.</p>
<p>Finally, when analyses are embedded in a literate programming workflow (i.e., documents that combine narrative text and executable code; dynamic document generation) additional layers of software dependencies arise. For example, rendering R Markdown (<code>.rmd</code>) or Quarto documents (<code>.qmd</code>) requires both a document conversion tool (e.g., Pandoc, which converts <code>.rmd</code> or <code>.qmd</code> files into formats such as PDF or HTML) and a typesetting system such as a LaTeX distribution or Typst. Each of these components introduces its own versioning constraints and platform-specific installation requirements. Taken together, these layers highlight that reproducibility depends not only on code and data, but also on the broader computational environment in which analyses are executed.</p>
</section>
<section id="nix-and-rix-a-comprehensive-solution" class="level1">
<h1>Nix and {rix}: A Comprehensive Solution</h1>
<p>A potential solution to the above issue is Nix <span class="citation" data-cites="dolstra_etall_2004">(<a href="#ref-dolstra_etall_2004" role="doc-biblioref">Dolstra et al., 2004</a>)</span>. Nix is a software ecosystem centered on a purely functional package manager and build system designed to make software environments reproducible, declarative, and isolated across platforms (think of Apple’s or Android’s application store). In practical terms, this means that Nix allows researchers to specify <em>exactly</em> which versions of programming languages, packages, and system libraries an analysis requires, and to recreate that same environment reliably on another machine.</p>
<p>Unlike familiar tools such as <code>install.packages()</code> in R, <code>apt-get</code> on Linux, or <code>uv</code> in Python—which typically manage only a single layer of the software stack—Nix handles language versions, package versions, and system-level dependencies within a single framework <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>. Rather than installing software into shared system directories, Nix builds each environment as an explicit, self-contained specification. As a result, multiple environments can coexist without conflict, and analyses can be rerun months or years later under identical computational conditions.</p>
<p>This unified approach directly addresses the fragmented landscape described above. Where researchers would otherwise need to coordinate separate tools for package management, interpreter versions, and system dependencies, Nix brings all three together within a single declarative model, lowering the barrier to fully reproducible computational workflows.</p>
<section id="core-principles" class="level2">
<h2 data-anchor-id="core-principles">Core Principles</h2>
<p>Rather than installing software into global directories (e.g., <code>/usr/lib</code>), Nix places every package in its own directory under <code>/nix/store</code>. Each package path contains a cryptographic hash representing its precise inputs—source code, dependencies, and build instructions. Because these paths are content-addressed, multiple versions of the same software can coexist without conflict. A researcher can, for example, maintain projects requiring R 4.1.0 and R 4.3.3 side by side, or use different package versions across analyses, switching between them seamlessly <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>.</p>
<p>The Nix ecosystem is built around nixpkgs, a version-controlled repository comprising more than 120,000 packages, including nearly all of CRAN and Bioconductor. By pinning a specific commit or date, researchers freeze the entire software stack—R itself, R packages, and all system libraries—at that point in time. This eliminates the system-dependency problems that tools like {renv} cannot address <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>. This architecture also ensures stability over time. Empirical work has shown strong rebuildability and reproducibility rates for historical nixpkgs snapshots <span class="citation" data-cites="rodrigues_baumann_2026_polyglot">(<a href="#ref-rodrigues_baumann_2026_polyglot" role="doc-biblioref">Rodrigues &amp; Baumann, 2026</a>)</span>. Combined with binary caches, which often allow environments to materialize in seconds, Nix becomes practical for interactive research workflows <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>.</p>
</section>
<section id="the-rix-package-r-interface-to-nix" class="level2">
<h2 data-anchor-id="the-rix-package-r-interface-to-nix">The {rix} Package: R Interface to Nix</h2>
<p>Nix expressions are written in a dedicated functional language unfamiliar to most researchers. The {rix} package removes this barrier by providing an R-native interface. A single call to <code>rix()</code> generates complete Nix configurations from standard R syntax, specifying R versions, CRAN packages, system libraries, and even Python or Julia components when required. Users never need to read or write Nix code directly, as {rix} performs the translation automatically <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>.</p>
<p>A key feature of {rix} is its integration with rstats-on-nix, a community-maintained fork offering daily CRAN snapshots and weekly tested environments on Linux and macOS. Researchers can request, for example, <code>rix(date = "2024-12-14")</code> to obtain a validated and reproducible environment without manually assessing compatibility. After the configuration is generated, <code>nix_build()</code> instantiates the environment, and binary caches typically allow this to complete within seconds <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>.</p>
<p>Although Nix is capable of replacing tools like Docker for isolation or {renv} for package management, it does not require an all-or-nothing transition. Researchers can adopt it gradually and use it alongside familiar tooling. For instance, by building Docker images with Nix, converting existing {renv} lockfiles, or running {targets} pipelines within a Nix-defined environment <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>. This allows Nix to strengthen reproducibility while preserving established workflows. We will come back to this after the tutorial.</p>
</section>
<section id="step-i-installing-nix-and-rix" class="level2">
<h2 data-anchor-id="step-i-installing-nix-and-rix">Step I: Installing Nix and {rix}</h2>
<p>Before proceeding, both Nix and the {rix} R package need to be installed. Installation procedures differ across operating systems (Windows via WSL2, Linux, and macOS), and detailed, up-to-date instructions are maintained in the official {rix} documentation:</p>
<ul>
<li><strong>Linux and Windows (WSL2)</strong>: <a href="https://docs.ropensci.org/rix/articles/b1-setting-up-and-using-rix-on-linux-and-windows.html" class="uri">https://docs.ropensci.org/rix/articles/b1-setting-up-and-using-rix-on-linux-and-windows.html</a></li>
<li><strong>macOS</strong>: <a href="https://docs.ropensci.org/rix/articles/b2-setting-up-and-using-rix-on-macos.html" class="uri">https://docs.ropensci.org/rix/articles/b2-setting-up-and-using-rix-on-macos.html</a></li>
</ul>
<p>Once Nix is installed<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, there are two ways to access {rix}, depending on whether R is already installed on your system. In this tutorial, we proceed as if R was already installed (<a href="#lst-install-rix-cran" class="quarto-xref">Listing&nbsp;1</a>):</p>
<div class="cell">
<div id="lst-install-rix-cran" class="r cell-code listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-install-rix-cran-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;1: Installing {rix} from CRAN or developmental version
</figcaption>
<div aria-describedby="lst-install-rix-cran-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CRAN version</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"rix"</span>) </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Development version</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"rix"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">repos =</span> <span class="fu">c</span>(</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://ropensci.r-universe.dev"</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</div>
</section>
<section id="sec-specifying-environment" class="level2">
<h2 data-anchor-id="sec-specifying-environment">Step II: Specifying the Computational Environment</h2>
<p>After that, we need to establish a reproducible environment by creating a script that will generate the environment specification. We recommend creating a file named <code>generate-env.R</code> (or similar) in the project directory. This script will use the <code>rix()</code> function from the {rix} package to produce a <code>default.nix</code> file—a declarative specification that precisely defines all software dependencies required for the project.</p>
<p>In our case, where we use literate programming for generating the manuscript, we implement the following environment specification, which can be found on the GitHub repository as a file named <code>gen-env.R</code> (<a href="#lst-rix-env-manuscript" class="quarto-xref">Listing&nbsp;2</a>):</p>
<div class="cell">
<div id="lst-rix-env-manuscript" class="r cell-code listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-rix-env-manuscript-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;2: Environment specification for the manuscript using rix()
</figcaption>
<div aria-describedby="lst-rix-env-manuscript-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rix)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rix</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="st">"2026-01-14"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">r_pkgs =</span> <span class="fu">c</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"rix"</span>, <span class="st">"quarto"</span>, <span class="st">"knitr"</span>, <span class="st">"marginaleffects"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"simhelpers"</span>, <span class="st">"ggplot2"</span>, <span class="st">"doParallel"</span>, <span class="st">"doRNG"</span>, <span class="st">"cowplot"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"dplyr"</span>, <span class="st">"svglite"</span>, <span class="st">"rvinecopulib"</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">system_pkgs =</span> <span class="fu">c</span>(<span class="st">"quarto"</span>),</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">tex_pkgs =</span> <span class="fu">c</span>(<span class="st">"amsmath"</span>, <span class="st">"ninecolors"</span>, <span class="st">"apa7"</span>, <span class="st">"scalerel"</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"threeparttable"</span>, <span class="st">"threeparttablex"</span>, <span class="st">"endfloat"</span>, <span class="st">"environ"</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"multirow"</span>, <span class="st">"tcolorbox"</span>, <span class="st">"pdfcol"</span>, <span class="st">"tikzfill"</span>, <span class="st">"fontawesome5"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"framed"</span>, <span class="st">"newtx"</span>, <span class="st">"fontaxes"</span>, <span class="st">"xstring"</span>, <span class="st">"wrapfig"</span>, <span class="st">"tabularray"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"siunitx"</span>, <span class="st">"fvextra"</span>, <span class="st">"geometry"</span>, <span class="st">"setspace"</span>, <span class="st">"fancyvrb"</span>, </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"anyfontsize"</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">ide =</span> <span class="st">"rstudio"</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">project_path =</span> <span class="st">"."</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</div>
<p>Thus, note that we have more than just the R packages specified for the simulation scripts. This happens because we also included what is needed for the manuscript generation, not solely for the simulation code. In Appendix B, we mention more specifically the reasons for adding each package in <code>r_pkgs()</code> and <code>tex_pkgs()</code>. For now, we focus more on clarifying the different arguments for the <code>rix()</code> function.</p>
<section id="the-environment-generation-script" class="level3">
<h3 data-anchor-id="the-environment-generation-script">The Environment Generation Script</h3>
<p>The <code>rix()</code> function<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> constructs this specification through a series of parameters that collectively describe the computational environment. Each parameter serves a distinct purpose in defining the environment’s characteristics.</p>
<section id="specifying-the-r-version" class="level4">
<h4 data-anchor-id="specifying-the-r-version">Specifying the R version.</h4>
<p>Researchers must first determine which version of R to use. This can be accomplished in two ways: The <code>r_ver</code> argument accepts an exact version string (e.g., “4.3.3”) or special designations such as “latest-upstream” for the most recent stable release. Alternatively, the <code>date</code> argument specifies a particular date (e.g., “2024-11-15”), which ensures that R and all packages correspond to the versions available on that date. The date-based approach is generally preferable for reproducibility, as it captures a complete snapshot of the R ecosystem at a single point in time. For this tutorial, as shown on top, we use the <code>date</code> parameter to ensure temporal consistency across all software components <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span> (see {rix} documentation for more: <a href="https://docs.ropensci.org/rix/articles/project-environments.html" class="uri">https://docs.ropensci.org/rix/articles/project-environments.html</a>).</p>
</section>
<section id="declaring-r-package-dependencies" class="level4">
<h4 data-anchor-id="declaring-r-package-dependencies">Declaring R package dependencies.</h4>
<p>The <code>r_pkgs</code> argument accepts a character vector listing all required R packages by their CRAN names. These packages will be installed from the version repository corresponding to the specified date or R version. It is important to list all packages that the analysis will load directly; dependencies of these packages are automatically resolved by Nix. For packages requiring specific versions not corresponding to the chosen date, researchers can specify exact versions using the syntax <code>"packagename@version"</code> (e.g., <code>"ggplot2@2.2.1"</code>). For packages available only on GitHub or other Git repositories, the <code>git_pkgs</code> argument accepts a list structure containing repository URLs and specific commit hashes. For example:</p>
<div class="cell">
<div id="lst-git-pkgs-example" class="r cell-code listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-git-pkgs-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;3: Example for the git_pkgs argument
</figcaption>
<div aria-describedby="lst-git-pkgs-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>git_pkgs <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">package_name =</span> <span class="st">"marginaleffects"</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">repo_url =</span> <span class="st">"https://github.com/vincentarelbundock/marginaleffects"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">commit =</span> <span class="st">"304bff91dc31ae28b227a8485bfa4f7bdc86d625"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</div>
<p>This ensures that exact development versions are obtained <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>. For our simulation study, all packages were used with their CRAN versions (see {rix} documentation for more details: <a href="https://docs.ropensci.org/rix/articles/installing-r-packages.html" class="uri">https://docs.ropensci.org/rix/articles/installing-r-packages.html</a>).</p>
</section>
<section id="including-system-level-dependencies" class="level4">
<h4 data-anchor-id="including-system-level-dependencies">Including system-level dependencies.</h4>
<p>Many R-based workflows require tools beyond R packages. The <code>system_pkgs</code> parameter specifies system-level software such as Quarto for document generation, Git for version control, or Pandoc for document conversion. Critically, we include Quarto as a system package because this tutorial demonstrates full computational reproducibility—not merely of the simulation code, but of the complete manuscript itself. Our manuscript uses the <code>apaquarto</code> extension for APA formatting, stored in the project’s <code>_extensions/</code> directory <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span> (see {rix} documentation for more: <a href="https://docs.ropensci.org/rix/articles/installing-system-tools.html" class="uri">https://docs.ropensci.org/rix/articles/installing-system-tools.html</a>).</p>
</section>
<section id="specifying-latex-packages" class="level4">
<h4 data-anchor-id="specifying-latex-packages">Specifying LaTeX packages.</h4>
<p>The <code>tex_pkgs</code> parameter specifies LaTeX packages needed for PDF compilation. When any packages are listed, Nix automatically includes a minimal TexLive distribution (<code>scheme-small</code>) as a base, to which the specified packages are added. Determining the required LaTeX packages may involve some trial and error—Quarto’s error messages during, for example, the PDF rendering indicate which packages are missing, and these can then be added to <code>tex_pkgs</code> (see {rix} documentation for more: <a href="https://docs.ropensci.org/rix/articles/installing-system-tools.html" class="uri">https://docs.ropensci.org/rix/articles/installing-system-tools.html</a>).</p>
</section>
<section id="configuring-the-development-environment" class="level4">
<h4 data-anchor-id="configuring-the-development-environment">Configuring the development environment.</h4>
<p>The <code>ide</code> parameter controls whether an integrated development environment (IDE) is included in the Nix environment, allowing users to interactively develop and run code within their editor of choice. When <code>ide</code> is specified, the project can be opened directly in the corresponding IDE, with all dependencies provided by the Nix environment. For example, setting <code>ide = "rstudio"</code> installs a project-specific version of RStudio inside the Nix environment. This is required for RStudio because, unlike most other editors, it cannot attach to an external Nix shell unless it is itself installed via Nix. On macOS, RStudio is only available through Nix for R versions 4.4.3 or later (or environments dated 2025-02-28 or later); for earlier R versions, alternative editors must be used. Other supported IDEs include Positron (<code>ide = "positron"</code>), Visual Studio Code (<code>ide = "code"</code>), and command-line interfaces such as Radian (<code>ide = "radian"</code>). These tools may either be installed directly within the Nix environment using the <code>ide</code> parameter, or users may rely on an existing system installation by setting <code>ide = "none"</code> (or <code>ide = "other"</code>) and configuring <code>direnv</code> to automatically load the Nix environment when the project directory is opened. All IDEs installed via Nix are project-specific and do not interfere with system-wide installations. Detailed configuration instructions are provided in the {rix} documentation: <a href="https://docs.ropensci.org/rix/articles/configuring-ide.html" class="uri">https://docs.ropensci.org/rix/articles/configuring-ide.html</a></p>
</section>
<section id="setting-file-output-parameters" class="level4">
<h4 data-anchor-id="setting-file-output-parameters">Setting file output parameters.</h4>
<p>The <code>project_path</code> parameter indicates where the <code>default.nix</code> file should be written (“.” denotes the current directory), while <code>overwrite</code> controls whether an existing file should be replaced. Adding to this, setting <code>print = TRUE</code>, which is another argument, displays the generated specification in the console for immediate verification <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>.</p>
</section>
<section id="multi-language-environment-support" class="level4">
<h4 data-anchor-id="multi-language-environment-support">Multi-language environment support.</h4>
<p>While this tutorial focuses on R, researchers working across multiple programming languages can include Python or Julia in their environments. The <code>py_conf</code> parameter accepts a list specifying a Python version and required packages (<a href="#lst-python-pkgs-example" class="quarto-xref">Listing&nbsp;4</a>). Similarly, <code>jl_conf</code> enables Julia package installation. This capability is particularly useful, for example, for projects requiring statistical computing in R alongside machine learning pipelines in Python or numerical optimization in Julia <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span> (see {rix} documentation for more: <a href="https://docs.ropensci.org/rix/articles/installing-r-packages.html" class="uri">https://docs.ropensci.org/rix/articles/installing-r-packages.html</a>).</p>
<div class="cell">
<div id="lst-python-pkgs-example" class="r cell-code listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-python-pkgs-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;4: Including Python packages
</figcaption>
<div aria-describedby="lst-python-pkgs-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>py_conf <span class="ot">=</span> <span class="fu">list</span>(<span class="at">py_version =</span> <span class="st">"3.12"</span>, <span class="at">py_pkgs =</span> <span class="fu">c</span>(<span class="st">"polars"</span>, <span class="st">"pandas"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</div>
</section>
</section>
</section>
<section id="generating-the-environment-specification" class="level2">
<h2 data-anchor-id="generating-the-environment-specification">Generating the Environment Specification</h2>
<p>After defining the computational environment, the <code>rix()</code> function must be executed to generate the <code>default.nix</code> file. This can be done interactively by running <code>rix()</code> in an R console, or from the terminal using <code>Rscript</code> (<a href="#lst-rscript-generate" class="quarto-xref">Listing&nbsp;5</a>):</p>
<div id="lst-rscript-generate" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-rscript-generate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;5: Generating the environment specification from the terminal
</figcaption>
<div aria-describedby="lst-rscript-generate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">felipelfv@Felipes-MacBook-Pro</span> Why-risk-it-when-you-can-rix-it % Rscript </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">generate_env.R</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>The resulting <code>default.nix</code> file serves as the complete environment specification and contains all information required to recreate the project in a fully reproducible manner.</p>
</section>
<section id="step-iii-building-and-using-the-reproducible-environment" class="level2">
<h2 data-anchor-id="step-iii-building-and-using-the-reproducible-environment">Step III: Building and Using the Reproducible Environment</h2>
<p>Once this step is complete, build the reproducible environment by navigating to the study directory in a terminal. You may use either the integrated Terminal in RStudio (Tools → Terminal → New Terminal) or an external system terminal from which you are running the Nix project. From the study directory, run the following command (Listing <a href="#lst-nix-build" class="quarto-xref">Listing&nbsp;6</a>):</p>
<div id="lst-nix-build" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-nix-build-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;6: Building the Nix environment
</figcaption>
<div aria-describedby="lst-nix-build-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">felipelfv@Felipes-MacBook-Pro</span> Why-risk-it-when-you-can-rix-it % nix-build</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>The expected output should look similar to (<a href="#lst-nix-build-output" class="quarto-xref">Listing&nbsp;7</a>):</p>
<div id="lst-nix-build-output" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-nix-build-output-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;7: Expected output from <code>nix-build</code>
</figcaption>
<div aria-describedby="lst-nix-build-output-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">unpacking</span> <span class="st">'https://github.com/rstats-on-nix/nixpkgs/archive/2025-08-25.tar.gz'</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">into</span> the Git cache...</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">warning:</span> ignoring untrusted substituter...</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">warning:</span> ignoring the client-specified setting...</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/nix/store/qa7fq20m2f94szsnqzciwv8h4n81w43v-nix-shell</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>This command builds the environment according to the specification. The first execution will download and install all required packages, which may take a few minutes depending on network speed and system resources. Subsequent builds use cached packages and complete in seconds. Upon successful completion, a path to the constructed environment in the Nix store is printed (here, <code>/nix/store/qa7fq20m2f94szsnqzciwv8h4n81w43v-nix-shell</code>), and a symbolic link named <code>result</code> appears in the project directory pointing to this location.</p>
<p>Note that the warnings indicate that you are not configured as a trusted user, so Nix cannot use the rstats-on-nix binary cache and will instead compile packages from source, which is slower. To enable binary caching, install the cachix client and configure the rstats-on-nix cache. See <a href="https://docs.ropensci.org/rix/articles/binary-cache.html" class="uri">https://docs.ropensci.org/rix/articles/binary-cache.html</a> for instructions.</p>
<p>To activate the environment, run (<a href="#lst-nix-shell" class="quarto-xref">Listing&nbsp;8</a>):</p>
<div id="lst-nix-shell" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-nix-shell-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;8: Activating the Nix environment
</figcaption>
<div aria-describedby="lst-nix-shell-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">felipelfv@Felipes-MacBook-Pro</span> Why-risk-it-when-you-can-rix-it % nix-shell</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>The expected output (if you have configured yourself as a trusted user, otherwise the same warnings will appear) should look similar to (<a href="#lst-nix-shell-output" class="quarto-xref">Listing&nbsp;9</a>):</p>
<div id="lst-nix-shell-output" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-nix-shell-output-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;9: Expected output from <code>nix-shell</code>
</figcaption>
<div aria-describedby="lst-nix-shell-output-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">unpacking</span> <span class="st">'https://flakehub.com/f/DeterminateSystems/nixpkgs-weekly/...'</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">into</span> the Git cache...</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[nix-shell:~/Desktop/AMPPS/Why-risk-it-when-you-can-rix-it]$</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>This command drops the user into a shell where all specified packages and tools are available. The shell prompt changes to indicate that a Nix environment is active (here, <code>[nix-shell:~/Desktop/AMPPS/Why-risk-it-when-you-can-rix-it]$</code>). To verify that R is being provided by Nix rather than a system installation, run <code>which R</code>. This should return a path within <code>/nix/store/</code>. Moreover, from within the Nix shell, users can launch their IDE by typing its name (e.g., <code>rstudio</code> or <code>positron</code>), which opens the IDE with the Nix environment active (<a href="#lst-shell-rs" class="quarto-xref">Listing&nbsp;10</a>)</p>
<div id="lst-shell-rs" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-shell-rs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;10: Activating RStudio
</figcaption>
<div aria-describedby="lst-shell-rs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[nix-shell:~/Desktop/AMPPS/Why-risk-it-when-you-can-rix-it]$</span> rstudio</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</section>
<section id="reproducing-the-complete-manuscript3" class="level2">
<h2 data-anchor-id="reproducing-the-complete-manuscript3">Reproducing the Complete Manuscript<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></h2>
<p>Within the nix shell, one is able to render the manuscript as follows in the terminal (<a href="#lst-quarto-render" class="quarto-xref">Listing&nbsp;11</a>):</p>
<div id="lst-quarto-render" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-quarto-render-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;11: Rendering the manuscript with Quarto
</figcaption>
<div aria-describedby="lst-quarto-render-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[nix-shell:~/Desktop/AMPPS/Why-risk-it-when-you-can-rix-it]$</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">quarto</span> render Manuscript/article.qmd</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>This command executes all code chunks in the manuscript, incorporates results and figures, and generates a formatted PDF following APA style guidelines via the apaquarto extension <span class="citation" data-cites="schneider_2024">(<a href="#ref-schneider_2024" role="doc-biblioref">Schneider, 2024</a>)</span>. This extension is saved in the project repo already. To download this extension for your own work you can install the extension by using the terminal (<a href="#lst-apaquarto-install" class="quarto-xref">Listing&nbsp;12</a>):</p>
<div id="lst-apaquarto-install" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-apaquarto-install-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;12: Installing the apaquarto extension
</figcaption>
<div aria-describedby="lst-apaquarto-install-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">felipelfv@Felipes-MacBook-Pro</span> your-project-directory % quarto use template </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">wjschne/apaquarto</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>or in the console (<a href="#lst-apaquarto-r" class="quarto-xref">Listing&nbsp;13</a>):</p>
<div class="cell">
<div id="lst-apaquarto-r" class="r cell-code listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-apaquarto-r-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;13: Installing the apaquarto extension from R
</figcaption>
<div aria-describedby="lst-apaquarto-r-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>quarto<span class="sc">::</span><span class="fu">quarto_use_template</span>(<span class="st">"wjschne/apaquarto"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</div>
<p>The final document (.docx, .pdf, or .html) is saved directly in the project folder<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. Because Quarto is installed as a system-level package in our Nix specification, the rendering occurs entirely within a fully reproducible environment, ensuring consistent output across machines regardless of local software configurations. If desired, the manuscript can also be reproduced interactively by opening the project folder in the user’s preferred IDE.</p>
<p>At this point, it is worth noting that Nix shells do not fully isolate you from your existing system by default. For R users, this has a practical implication: packages installed in your regular R library (outside of Nix) could potentially be loaded when running R from within the Nix environment. The {rix} package addresses this automatically—when you call <code>rix()</code>, it also executes <code>rix_init()</code>, which creates a project-specific <code>.Rprofile</code>. This file configures R to ignore external package libraries and also disables <code>install.packages()</code> within the environment. The rationale is straightforward: any new packages should be added to <code>default.nix</code> and the environment rebuilt, preserving full reproducibility <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>. However, for stricter isolation<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> that also prevents access to other system programs not specified in <code>default.nix</code>, use the <code>--pure</code> flag (<a href="#lst-nix-shell-pure" class="quarto-xref">Listing&nbsp;14</a>):</p>
<div id="lst-nix-shell-pure" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-nix-shell-pure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;14: Activating the Nix environment with strict isolation
</figcaption>
<div aria-describedby="lst-nix-shell-pure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nix-shell</span> <span class="at">--pure</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<section id="reproducing-the-simulation-and-results" class="level3">
<h3 data-anchor-id="reproducing-the-simulation-and-results">Reproducing the Simulation and Results</h3>
<p>As previously mentioned, researchers may prefer not to use literate programming, or embedding the simulation within a dynamic document may be impractical. In this case, one could still follow the same steps shown thus far focusing only on the .R files while still benefiting from a reproducible computational environment. The <code>Simulation_Scripts/</code> folder contains the five sequential scripts that depend on one another. For example, <code>03_run_simulation.R</code> begins by loading the required packages and sourcing other scripts that are needed:</p>
<div class="cell">
<div id="lst-run-simulation" class="r cell-code listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-run-simulation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;15: Code for running simulation
</figcaption>
<div aria-describedby="lst-run-simulation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marginaleffects)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvinecopulib)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Source helper functions                                                   </span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"Simulation_Scripts/01_data_generation.R"</span>)                    </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"Simulation_Scripts/02_models.R"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>...</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</div>
<p>After following Steps I-III (without needing to define packages for the dynamic document rendering in Step I), the simulation study may be reproduced within the Nix shell (<a href="#lst-run-simulation" class="quarto-xref">Listing&nbsp;16</a>) as follows:</p>
<div id="lst-run-simulation" class="listing quarto-float quarto-figure quarto-figure-left">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-run-simulation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;16: Running the complete simulation workflow
</figcaption>
<div aria-describedby="lst-run-simulation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[nix-shell:~/Desktop/AMPPS/Why-risk-it-when-you-can-rix-it]$</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Rscript</span> Simulation_Scripts/03_run_simulation.R</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>Therefore, the key advantage of executing within <code>nix-shell</code> is that all dependencies (i.e., R version, packages, and system tools) match exactly those specified in <code>default.nix</code>. In the same way, we could proceed with <code>04_performance_metrics.R</code> which loads the simulation results (in <code>Simulation_Scripts/sim_results.rds</code>) and calculates the performance metrics, and <code>05_plots.R</code> uses those saved metrics (in <code>Simulation_Scripts/performance_summary.rds</code>) to create the plots. Note, however, that this approach relies on manually running scripts in sequence. It ensures a reproducible environment but does not formalize the workflow itself; dependencies between scripts remain implicit in the code rather than explicitly declared.</p>
</section>
</section>
<section id="additional-considerations-for-advanced-workflows" class="level2">
<h2 data-anchor-id="additional-considerations-for-advanced-workflows">Additional Considerations for Advanced Workflows</h2>
<p>Thus far, we have presented Nix and {rix} as standalone solutions for computational reproducibility, contrasting initially them with tools like {renv}, Docker, and {targets}. However, these tools are not mutually exclusive, as in many cases, they can complement each other <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>. Additionally, as highlighted in previous literature <span class="citation" data-cites="peikert_brandmaier_2021 siepe_etall_2024 piccolo_frampton_2016">(<a href="#ref-peikert_brandmaier_2021" role="doc-biblioref">Peikert &amp; Brandmaier, 2021</a>; <a href="#ref-piccolo_frampton_2016" role="doc-biblioref">Piccolo &amp; Frampton, 2016</a>; <a href="#ref-siepe_etall_2024" role="doc-biblioref">Siepe et al., 2024</a>)</span>, fully reproducible research benefits not only from a stable computational environment but also from explicit workflow orchestration. We therefore briefly introduce {rixpress}, which extends Nix-based reproducibility to formalized, multi-language pipelines. These topics are not covered in depth; our goal is simply to clarify how these tools relate to one another and orient readers toward resources for more advanced use cases.</p>
<section id="workflow-orchestration-targets-and-rixpress" class="level3">
<h3 data-anchor-id="workflow-orchestration-targets-and-rixpress">Workflow Orchestration: {targets} and {rixpress}</h3>
<p>Complex simulation studies often benefit from workflow management systems that track dependencies between computational steps, cache intermediate results, and enable selective re-execution when inputs change. Two complementary approaches exist within the Nix ecosystem.</p>
<section id="using-targets-within-nix" class="level4">
<h4 data-anchor-id="using-targets-within-nix">Using {targets} Within Nix.</h4>
<p>The {targets} package <span class="citation" data-cites="landau_2021">(<a href="#ref-landau_2021" role="doc-biblioref">Landau, 2021</a>)</span> provides workflow orchestration for R-based projects. To integrate {targets} with Nix, include <code>targets</code> in the <code>r_pkgs</code> parameter of <code>rix()</code> and execute the pipeline within <code>nix-shell</code> using <code>Rscript -e 'targets::tar_make()'</code>. A shell hook can also be added via the <code>shell_hook</code> argument to run the pipeline automatically when entering the Nix shell. This approach is ideal for projects that remain within R and do not require different environments for different pipeline steps (see {rix} documentation: <a href="https://docs.ropensci.org/rix/articles/reproducible-pipelines.html" class="uri">https://docs.ropensci.org/rix/articles/reproducible-pipelines.html</a>).</p>
</section>
<section id="using-rixpress-for-polyglot-pipelines" class="level4">
<h4 data-anchor-id="using-rixpress-for-polyglot-pipelines">Using {rixpress} for Polyglot Pipelines.</h4>
<p>The {rixpress} package <span class="citation" data-cites="rixpress">(<a href="#ref-rixpress" role="doc-biblioref">Rodrigues, 2025</a>)</span>, a sister package to {rix}, uses Nix itself as the build automation tool rather than operating within a Nix environment. Each pipeline step becomes a Nix derivation, built in isolation with automatic caching based on content. The key advantage emerges in multi-language workflows: different steps can execute in different Nix-defined environments (e.g., one step using a specific version of R, another using Python, another using Julia). The interface, inspired by {targets}, uses functions like <code>rxp_r()</code>, <code>rxp_py()</code>, and <code>rxp_jl()</code> to define pipeline steps (see {rixpress} documentation: <a href="https://docs.ropensci.org/rixpress/articles/intro-concepts.html" class="uri">https://docs.ropensci.org/rixpress/articles/intro-concepts.html</a>). The GitHub repository includes a branch demonstrating {rixpress} for this entire project.</p>
</section>
</section>
<section id="converting-existing-renv-projects" class="level3">
<h3 data-anchor-id="converting-existing-renv-projects">Converting Existing {renv} Projects</h3>
<p>Researchers with existing {renv} projects can migrate using the <code>renv2nix()</code> function, which reads an <code>renv.lock</code> file and generates an equivalent Nix expression. This is particularly valuable for projects where {renv} encountered system dependency issues or where stricter reproducibility guarantees are desired. Unlike {renv}, which captures R package versions but not the R interpreter or system libraries, Nix manages all layers of the software stack (see {rix} documentation: <a href="https://docs.ropensci.org/rix/articles/renv2nix.html" class="uri">https://docs.ropensci.org/rix/articles/renv2nix.html</a>).</p>
</section>
<section id="containerization-with-docker" class="level3">
<h3 data-anchor-id="containerization-with-docker">Containerization with Docker</h3>
<p>Nix and Docker are not necessarily mutually exclusive <span class="citation" data-cites="rodrigues_baumann_2026_polyglot">(<a href="#ref-rodrigues_baumann_2026_polyglot" role="doc-biblioref">Rodrigues &amp; Baumann, 2026</a>)</span>. Researchers already using Docker do not need to abandon it to benefit from Nix—the two can be combined by using Nix inside Docker containers to handle environment setup <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>. This is particularly useful for deployment to cloud platforms or high-performance computing clusters where Docker is standard but Nix may not be available (see {rix} documentation: <a href="https://docs.ropensci.org/rix/articles/nix-inside-docker.html" class="uri">https://docs.ropensci.org/rix/articles/nix-inside-docker.html</a>).</p>
</section>
</section>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<p>Reproducibility in computational research is often treated as a matter of transparency—making data and code available. This tutorial has argued that transparency alone is insufficient without the ability to reliably reconstruct the computational environments in which analyses are executed. For simulation studies in particular, where results depend critically on software versions, system libraries, and random number generation, environment-level reproducibility is not optional but essential.</p>
<p>By introducing Nix and the {rix} package, we demonstrated a practical and accessible approach to fully specifying and rebuilding computational environments for simulation-based research. This approach enables analyses and manuscripts to be rerun identically across machines and over time, transforming reproducibility from an aspirational goal into a verifiable property of the research workflow.</p>
<p>Importantly, adopting environment reproducibility does not require abandoning existing analytic practices. Nix is agnostic to programming language, editor, workflow structure, and manuscript template, allowing researchers to retain familiar tools while strengthening the reliability of their work. In this sense, reproducible environments serve as enabling infrastructure—supporting, rather than replacing, other best practices such as version control, workflow orchestration, and transparent reporting.</p>
<p>If reproducibility is to function as a cornerstone of cumulative science, then the ability to reconstruct computational environments must become a routine part of methodological practice. Tools such as Nix and {rix} lower the barrier to achieving this goal, making fully reproducible simulation research feasible without requiring deep systems expertise. We hope this tutorial helps normalize environment-level reproducibility as a standard component of rigorous computational research in psychology and beyond.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-baker_etall_2024" class="csl-entry" role="listitem">
Baker, D. H., Berg, M., Hansford, K., Quinn, B., Segala, F., &amp; Warden-English, E. (2024). <span>ReproduceMe</span>: Lessons from a pilot project on computational reproducibility. <em>Meta-Psychology</em>, <em>8</em>, MP.2023.4021. <a href="https://doi.org/10.15626/MP.2023.4021">https://doi.org/10.15626/MP.2023.4021</a>
</div>
<div id="ref-boettiger_2015" class="csl-entry" role="listitem">
Boettiger, C. (2015). An introduction to <span>Docker</span> for reproducible research. <em>ACM SIGOPS Operating Systems Review</em>, <em>49</em>(1), 71–79. <a href="https://doi.org/10.1145/2723872.2723882">https://doi.org/10.1145/2723872.2723882</a>
</div>
<div id="ref-boettiger_eddelbuettel_2017" class="csl-entry" role="listitem">
Boettiger, C., &amp; Eddelbuettel, D. (2017). An introduction to <span>Rocker</span>: <span>Docker</span> containers for <span>R</span>. <em>The R Journal</em>, <em>9</em>(2), 527–536. <a href="https://doi.org/10.32614/RJ-2017-065">https://doi.org/10.32614/RJ-2017-065</a>
</div>
<div id="ref-dolstra_etall_2004" class="csl-entry" role="listitem">
Dolstra, E., De Jonge, M., &amp; Visser, E. (2004). Nix: A safe and policy-free system for software deployment. <em>18th Large Installation System Administration Conference</em>, 79–92.
</div>
<div id="ref-epskamp_2019" class="csl-entry" role="listitem">
Epskamp, S. (2019). Reproducibility and replicability in a fast-paced methodological world. <em>Advances in Methods and Practices in Psychological Science</em>, <em>2</em>(2), 145–155. <a href="https://doi.org/10.1177/2515245919847421">https://doi.org/10.1177/2515245919847421</a>
</div>
<div id="ref-feldman_1979" class="csl-entry" role="listitem">
Feldman, S. I. (1979). <span>Make</span> — a program for maintaining computer programs. <em>Software: Practice and Experience</em>, <em>9</em>(4), 255–265. <a href="https://doi.org/10.1002/spe.4380090402">https://doi.org/10.1002/spe.4380090402</a>
</div>
<div id="ref-glatard_etall_2015" class="csl-entry" role="listitem">
Glatard, T., Lewis, L. B., Ferreira da Silva, R., Adalat, R., Beck, N., Lepage, C., Rioux, P., Rousseau, M.-É., Sherif, T., Deelman, E., Khalili-Mahani, N., &amp; Evans, A. C. (2015). Reproducibility of neuroimaging analyses across operating systems. <em>Frontiers in Neuroinformatics</em>, <em>9</em>, 12. <a href="https://doi.org/10.3389/fninf.2015.00012">https://doi.org/10.3389/fninf.2015.00012</a>
</div>
<div id="ref-hardwicke2020" class="csl-entry" role="listitem">
Hardwicke, T. E., Wallach, J. D., Kidwell, M. C., Bendixen, T., Crüwell, S., &amp; Ioannidis, J. P. A. (2020). An empirical assessment of transparency and reproducibility-related research practices in the social sciences (2014<span></span>2017). <em>Royal Society Open Science</em>, <em>7</em>(2), 190806. <a href="https://doi.org/10.1098/rsos.190806">https://doi.org/10.1098/rsos.190806</a>
</div>
<div id="ref-hodges_etall_2023" class="csl-entry" role="listitem">
Hodges, C. B., Stone, B. M., Johnson, P. K., Carter, J. H., III, Sawyers, C. K., Roby, P. R., &amp; Lindsey, H. M. (2023). Researcher degrees of freedom in statistical software contribute to unreliable results: A comparison of nonparametric analyses conducted in <span>SPSS</span>, <span>SAS</span>, <span>Stata</span>, and <span>R</span>. <em>Behavior Research Methods</em>, <em>55</em>(6), 2813–2837. <a href="https://doi.org/10.3758/s13428-022-01932-2">https://doi.org/10.3758/s13428-022-01932-2</a>
</div>
<div id="ref-kidwell_etall_2016" class="csl-entry" role="listitem">
Kidwell, M. C., Lazarević, L. B., Baranski, E., Hardwicke, T. E., Piechowski, S., Falkenberg, L.-S., Kennett, C., Slowik, A., Sonnleitner, C., Hess-Holden, C., Errington, T. M., Fiedler, S., &amp; Nosek, B. A. (2016). Badges to acknowledge open practices: A simple, low-cost, effective method for increasing transparency. <em>PLOS Biology</em>, <em>14</em>(5), e1002456. <a href="https://doi.org/10.1371/journal.pbio.1002456">https://doi.org/10.1371/journal.pbio.1002456</a>
</div>
<div id="ref-landau_2021" class="csl-entry" role="listitem">
Landau, W. M. (2021). <em>Targets: Dynamic function-oriented make-like declarative workflows</em>.
</div>
<div id="ref-levenstein_lyle_2018" class="csl-entry" role="listitem">
Levenstein, M. C., &amp; Lyle, J. A. (2018). Data: Sharing is caring. <em>Advances in Methods and Practices in Psychological Science</em>, <em>1</em>(1), 95–103.
</div>
<div id="ref-luijken_etall_2024" class="csl-entry" role="listitem">
Luijken, K., Lohmann, A., Alter, U., Claramunt Gonzalez, J., Clouth, F. J., Fossum, J. L., Hesen, L., Huizing, A. H. J., Ketelaar, J., Montoya, A. K., Nab, L., Nijman, R. C. C., Penning de Vries, B. B. L., Tibbe, T. D., Wang, Y. A., &amp; Groenwold, R. H. H. (2024). Replicability of simulation studies for the investigation of statistical methods: The <span>RepliSims</span> project. <em>Royal Society Open Science</em>, <em>11</em>(1), 231003. <a href="https://doi.org/10.1098/rsos.231003">https://doi.org/10.1098/rsos.231003</a>
</div>
<div id="ref-malka2024" class="csl-entry" role="listitem">
Malka, J., Zacchiroli, S., &amp; Zimmermann, T. (2024). Reproducibility of build environments through space and time. <em>Proceedings of the 2024 ACM/IEEE 44th International Conference on Software Engineering: New Ideas and Emerging Results</em>, 97–101. <a href="https://doi.org/10.1145/3639476.3639767">https://doi.org/10.1145/3639476.3639767</a>
</div>
<div id="ref-morris_etall_2019" class="csl-entry" role="listitem">
Morris, T. P., White, I. R., &amp; Crowther, M. J. (2019). Using simulation studies to evaluate statistical methods. <em>Statistics in Medicine</em>, <em>38</em>(11), 2074–2102. <a href="https://doi.org/10.1002/sim.8086">https://doi.org/10.1002/sim.8086</a>
</div>
<div id="ref-rvinecopulib" class="csl-entry" role="listitem">
Nagler, T., &amp; Vatter, T. (2025). <em>Rvinecopulib: High performance algorithms for vine copula modeling</em>. <a href="https://CRAN.R-project.org/package=rvinecopulib">https://CRAN.R-project.org/package=rvinecopulib</a>
</div>
<div id="ref-nosek_etall_2015" class="csl-entry" role="listitem">
Nosek, B. A., Alter, G., Banks, G. C., Borsboom, D., Bowman, S. D., Breckler, S. J., Buck, S., Chambers, C. D., Chin, G., Christensen, G., Contestabile, M., Dafoe, A., Eich, E., Freese, J., Glennerster, R., Goroff, D., Green, D. P., Hesse, B., Humphreys, M., … Yarkoni, T. (2015). Promoting an open research culture. <em>Science</em>, <em>348</em>(6242), 1422–1425. <a href="https://doi.org/10.1126/science.aab2374">https://doi.org/10.1126/science.aab2374</a>
</div>
<div id="ref-nosek_etall_2022" class="csl-entry" role="listitem">
Nosek, B. A., Hardwicke, T. E., Moshontz, H., Allard, A., Corker, K. S., Dreber, A., Fidler, F., Hilgard, J., Kline Struhl, M., Nuijten, M. B., Rohrer, J. M., Romero, F., Scheel, A. M., Scherer, L. D., Schönbrodt, F. D., &amp; Vazire, S. (2022). Replicability, robustness, and reproducibility in psychological science. <em>Annual Review of Psychology</em>, <em>73</em>, 719–748. <a href="https://doi.org/10.1146/annurev-psych-020821-114157">https://doi.org/10.1146/annurev-psych-020821-114157</a>
</div>
<div id="ref-ottoboni_stark_2018" class="csl-entry" role="listitem">
Ottoboni, K., &amp; Stark, P. B. (2018). <em>Random problems with r</em>. <a href="https://arxiv.org/abs/1809.06520">https://arxiv.org/abs/1809.06520</a>
</div>
<div id="ref-pawel_etall_2025" class="csl-entry" role="listitem">
Pawel, S., Bartoš, F., Siepe, B. S., &amp; Lohmann, A. (2025). Handling missingness, failures, and non-convergence in simulation studies: A review of current practices and recommendations. <em>The American Statistician</em>, 1–18. <a href="https://doi.org/10.1080/00031305.2025.2540002">https://doi.org/10.1080/00031305.2025.2540002</a>
</div>
<div id="ref-peikert_brandmaier_2021" class="csl-entry" role="listitem">
Peikert, A., &amp; Brandmaier, A. M. (2021). A reproducible data analysis workflow. <em>Quantitative and Computational Methods in Behavioral Sciences</em>, <em>1</em>, e3763. <a href="https://doi.org/10.5964/qcmb.3763">https://doi.org/10.5964/qcmb.3763</a>
</div>
<div id="ref-peng_2011" class="csl-entry" role="listitem">
Peng, R. D. (2011). Reproducible research in computational science. <em>Science</em>, <em>334</em>(6060), 1226–1227.
</div>
<div id="ref-piccolo_frampton_2016" class="csl-entry" role="listitem">
Piccolo, S. R., &amp; Frampton, M. B. (2016). Tools and techniques for computational reproducibility. <em>GigaScience</em>, <em>5</em>, 30. <a href="https://doi.org/10.1186/s13742-016-0135-4">https://doi.org/10.1186/s13742-016-0135-4</a>
</div>
<div id="ref-rodrigues_2023" class="csl-entry" role="listitem">
Rodrigues, B. (2023). <em>Building reproducible analytical pipelines with <span>R</span></em>. <a href="https://raps-with-r.dev">https://raps-with-r.dev</a>
</div>
<div id="ref-rixpress" class="csl-entry" role="listitem">
Rodrigues, B. (2025). <em>Rixpress: Build reproducible analytical pipelines with ’nix’</em>. <a href="https://CRAN.R-project.org/package=rixpress">https://CRAN.R-project.org/package=rixpress</a>
</div>
<div id="ref-rodrigues_baumann_2025" class="csl-entry" role="listitem">
Rodrigues, B., &amp; Baumann, P. (2025). <em>Rix: Reproducible data science environments with ’nix’</em>. <a href="https://CRAN.R-project.org/package=rix">https://CRAN.R-project.org/package=rix</a>
</div>
<div id="ref-rodrigues_baumann_2026_polyglot" class="csl-entry" role="listitem">
Rodrigues, B., &amp; Baumann, P. (2026). <em>Nix for polyglot, reproducible data science workflows</em> (Version v0.0.1). Zenodo. <a href="https://doi.org/10.5281/zenodo.18138618">https://doi.org/10.5281/zenodo.18138618</a>
</div>
<div id="ref-schneider_2024" class="csl-entry" role="listitem">
Schneider, W. J. (2024). <em><span>Apaquarto</span></em> [Computer software]. <a href="https://github.com/wjschne/apaquarto">https://github.com/wjschne/apaquarto</a>
</div>
<div id="ref-siepe_etall_2024" class="csl-entry" role="listitem">
Siepe, B. S., Bartoš, F., Morris, T. P., Boulesteix, A.-L., Heck, D. W., &amp; Pawel, S. (2024). Simulation studies for methodological research in psychology: A standardized template for planning, preregistration, and reporting. <em>Psychological Methods</em>. <a href="https://doi.org/10.1037/met0000695">https://doi.org/10.1037/met0000695</a>
</div>
<div id="ref-simonsohn_2020" class="csl-entry" role="listitem">
Simonsohn, U. (2020). <em>Groundhog: Version-control for CRAN, github, and gitlab packages</em>.
</div>
<div id="ref-ushey_2024" class="csl-entry" role="listitem">
Ushey, K. (2024). <em>Renv: Project environments</em>.
</div>
<div id="ref-vazire2018" class="csl-entry" role="listitem">
Vazire, S. (2018). Implications of the credibility revolution for productivity, creativity, and progress. <em>Perspectives on Psychological Science</em>, <em>13</em>(4), 411–417. <a href="https://doi.org/10.1177/1745691617751884">https://doi.org/10.1177/1745691617751884</a>
</div>
<div id="ref-white_etall_2024" class="csl-entry" role="listitem">
White, I. R., Pham, T. M., Quartagno, M., &amp; Morris, T. P. (2024). How to check a simulation study. <em>International Journal of Epidemiology</em>, <em>53</em>(1), dyad134. <a href="https://doi.org/10.1093/ije/dyad134">https://doi.org/10.1093/ije/dyad134</a>
</div>
<div id="ref-wiebels_moreau_2021" class="csl-entry" role="listitem">
Wiebels, K., &amp; Moreau, D. (2021). Leveraging containers for reproducible psychological research. <em>Advances in Methods and Practices in Psychological Science</em>, <em>4</em>(2). <a href="https://doi.org/10.1177/25152459211017853">https://doi.org/10.1177/25152459211017853</a>
</div>
</div>
<div class="cell FigureWithoutNote" prefix="" data-tblnum="1" data-custom-style="FigureWithoutNote">
<div id="tbl-results" class="cell quarto-float quarto-figure quarto-figure-center" prefix="" data-tblnum="1">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Table&nbsp;1</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>Performance metrics for ACE estimator across simulation conditions</p>
</div>
</figcaption>
<div aria-describedby="tbl-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 17%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Sample Size</th>
<th style="text-align: center;">Confounding</th>
<th style="text-align: center;">Relative Bias</th>
<th style="text-align: center;">Relative RMSE</th>
<th style="text-align: center;">Coverage</th>
<th style="text-align: center;">CI Width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">50</td>
<td style="text-align: center;">none</td>
<td style="text-align: center;">0.957</td>
<td style="text-align: center;">0.422</td>
<td style="text-align: center;">0.910</td>
<td style="text-align: center;">0.224</td>
</tr>
<tr class="even">
<td style="text-align: left;">100</td>
<td style="text-align: center;">none</td>
<td style="text-align: center;">1.013</td>
<td style="text-align: center;">0.256</td>
<td style="text-align: center;">0.930</td>
<td style="text-align: center;">0.159</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2000</td>
<td style="text-align: center;">none</td>
<td style="text-align: center;">0.997</td>
<td style="text-align: center;">0.059</td>
<td style="text-align: center;">0.960</td>
<td style="text-align: center;">0.036</td>
</tr>
<tr class="even">
<td style="text-align: left;">50</td>
<td style="text-align: center;">mild</td>
<td style="text-align: center;">1.173</td>
<td style="text-align: center;">0.395</td>
<td style="text-align: center;">0.890</td>
<td style="text-align: center;">0.222</td>
</tr>
<tr class="odd">
<td style="text-align: left;">100</td>
<td style="text-align: center;">mild</td>
<td style="text-align: center;">1.157</td>
<td style="text-align: center;">0.318</td>
<td style="text-align: center;">0.870</td>
<td style="text-align: center;">0.154</td>
</tr>
<tr class="even">
<td style="text-align: left;">2000</td>
<td style="text-align: center;">mild</td>
<td style="text-align: center;">1.114</td>
<td style="text-align: center;">0.130</td>
<td style="text-align: center;">0.510</td>
<td style="text-align: center;">0.035</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50</td>
<td style="text-align: center;">severe</td>
<td style="text-align: center;">1.200</td>
<td style="text-align: center;">0.482</td>
<td style="text-align: center;">0.870</td>
<td style="text-align: center;">0.223</td>
</tr>
<tr class="even">
<td style="text-align: left;">100</td>
<td style="text-align: center;">severe</td>
<td style="text-align: center;">1.235</td>
<td style="text-align: center;">0.379</td>
<td style="text-align: center;">0.830</td>
<td style="text-align: center;">0.157</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2000</td>
<td style="text-align: center;">severe</td>
<td style="text-align: center;">1.257</td>
<td style="text-align: center;">0.266</td>
<td style="text-align: center;">0.020</td>
<td style="text-align: center;">0.035</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell FigureWithoutNote" data-custom-style="FigureWithoutNote">
<div class="cell-output-display">
<div id="fig-performance" class="quarto-float quarto-figure quarto-figure-center" prefix="" data-fignum="1">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-performance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;1</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>Performance of ACE estimator across sample sizes and confounding severity. Panel A shows relative bias, Panel B shows relative RMSE, Panel C shows coverage probability of 95% confidence intervals (dashed line at nominal 0.95 level), and Panel D shows average confidence interval width. Results demonstrate that model misspecification induces systematic bias that persists across sample sizes, while increasing sample size improves precision but not accuracy under misspecification.</p>
</div>
</figcaption>
<div aria-describedby="fig-performance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="article_files/figure-html/fig-performance-1.svg" class="img-fluid figure-img" width="960">
</div>
</figure>
</div>
</div>
</div>
</section>
<section class="level1">
<h1>Appendix A</h1>
</section>
<section id="apx-simulation-study-design" class="level1" data-appendixtitle="A">
<h1 data-appendixtitle="A">Simulation Study Design</h1>
<p>Here we present a rather short description following recommendations from previous research, but ideally even more may be reported <span class="citation" data-cites="pawel_etall_2025 siepe_etall_2024 morris_etall_2019 white_etall_2024">(<a href="#ref-morris_etall_2019" role="doc-biblioref">Morris et al., 2019</a>; <a href="#ref-pawel_etall_2025" role="doc-biblioref">Pawel et al., 2025</a>; <a href="#ref-siepe_etall_2024" role="doc-biblioref">Siepe et al., 2024</a>; <a href="#ref-white_etall_2024" role="doc-biblioref">White et al., 2024</a>)</span>. This mimics a methods or similar section in articles.</p>
<p><strong>Factorial Design.</strong> The simulation employs a full factorial design with two factors: sample size (<span class="math inline">n \in \{50, 100, 2000\}</span>) and degree of confounding non-linearity (<span class="math inline">\gamma_2 \in \{0, 0.3, 0.8\}</span>, labeled as none, mild, and severe). The parameter <span class="math inline">\gamma_2</span> controls the strength of the quadratic confounder effect on the outcome (see Data Generation). This yields nine conditions, each replicated <span class="math inline">K = 1000</span> times.</p>
<p><strong>Data Generation.</strong> For each replication, data are generated following a causal structure where a confounder <span class="math inline">X_2</span> affects both treatment assignment and the outcome. The confounder and treatment error term are generated using the {rvinecopulib} package: pairs <span class="math inline">(U_1, U_2)</span> are drawn from an independence copula via <code>rbicop()</code>, then transformed to standard normals via <span class="math inline">X_2 = \Phi^{-1}(U_1)</span> and <span class="math inline">\epsilon = \Phi^{-1}(U_2)</span>. The independence copula is simply <span class="math inline">C(u,v) = uv</span>, meaning the resulting uniforms are independent—mathematically equivalent to calling <code>rnorm()</code> directly. We use {rvinecopulib} intentionally because it depends on C++ libraries.</p>
<p>Treatment assignment follows <span class="math inline">X_1 = \alpha_0 + \alpha_1 X_2 + \alpha_2 X_2^2 + \epsilon</span> where <span class="math inline">\alpha_0 = 0</span>, <span class="math inline">\alpha_1 = 0.5</span>, and <span class="math inline">\alpha_2 = 0.2</span>. This creates confounding because <span class="math inline">X_2</span> influences treatment assignment through both linear and quadratic terms. The binary outcome is generated from the true logistic regression model: <span class="math display">
\text{logit}(P(Y = 1 \mid X_1, X_2)) = \beta_0 + \beta_1 X_1 + \gamma_1 X_2 + \gamma_2 X_2^2
</span></p>
<p>with parameters <span class="math inline">\beta_0 = -0.5</span>, <span class="math inline">\beta_1 = 0.7</span> (the causal effect of interest), <span class="math inline">\gamma_1 = -0.4</span>, and <span class="math inline">\gamma_2</span> varying by condition. The analyst misspecifies the outcome model by omitting the quadratic confounder term, fitting instead: <span class="math display">
\text{logit}(P(Y = 1 \mid X_1, X_2)) = \beta_0 + \beta_1 X_1 + \gamma_1 X_2
</span></p>
<p>This misspecification creates residual confounding because the omitted term <span class="math inline">\gamma_2 X_2^2</span> is correlated with <span class="math inline">X_1</span> (since <span class="math inline">X_1</span> depends on both <span class="math inline">X_2</span> and <span class="math inline">X_2^2</span>), violating the conditional exchangeability assumption given linear adjustment alone.</p>
<p><strong>Estimand.</strong> The target estimand is the average causal effect (ACE) of <span class="math inline">X_1</span> on <span class="math inline">Y</span>, properly adjusted for confounding: <span class="math display">
\text{ACE}(X_1) = \mathbb{E}\left[\frac{\partial P(Y = 1 \mid X_1, X_2)}{\partial X_1}\right] = \mathbb{E}\left[\beta_1 \cdot \frac{\exp(\eta)}{(1 + \exp(\eta))^2}\right]
</span></p>
<p>where <span class="math inline">\eta = \beta_0 + \beta_1 X_1 + \gamma_1 X_2 + \gamma_2 X_2^2</span> is the correctly specified linear predictor, and the expectation is taken over the joint distribution of <span class="math inline">(X_1, X_2)</span>. For each <span class="math inline">\gamma_2</span> condition, the “true” ACE (denoted <span class="math inline">\theta</span>) is approximated once using a very large sample (<span class="math inline">N = 200,000</span>) with the correctly specified model including <span class="math inline">X_2^2</span>.</p>
<p><strong>Estimator.</strong> The causal effect is estimated from the misspecified model (omitting <span class="math inline">X_2^2</span>) as: <span class="math display">
\widehat{\text{ACE}}(X_1) = \frac{1}{n}\sum_{i=1}^{n} \tilde{\beta}_1 \cdot \frac{\exp(\tilde{\eta}_i)}{(1 + \exp(\tilde{\eta}_i))^2}
</span></p>
<p>where <span class="math inline">\tilde{\eta}_i = \tilde{\beta}_0 + \tilde{\beta}_1 X_{i1} + \tilde{\gamma}_1 X_{i2}</span> and <span class="math inline">\tilde{\boldsymbol{\beta}} = (\tilde{\beta}_0, \tilde{\beta}_1, \tilde{\gamma}_1)</span> are maximum likelihood estimates from the misspecified logistic regression.</p>
<table class="caption-top table">
<caption>Performance criteria for evaluating the ACE estimator. <span class="math inline">\hat{\theta}_k</span> denotes the ACE estimate from replication <span class="math inline">k</span> (for <span class="math inline">k = 1, \ldots, K</span>), where <span class="math inline">K = 1000</span> is the number of replications, and <span class="math inline">\theta</span> denotes the true ACE for a given condition. For coverage and width criteria, <span class="math inline">A_k</span> and <span class="math inline">B_k</span> denote the lower and upper endpoints of the 95% confidence interval from replication <span class="math inline">k</span>, <span class="math inline">W_k = B_k - A_k</span> is the interval width, <span class="math inline">c_{\beta}</span> is the estimated coverage probability, and <span class="math inline">I(\cdot)</span> is an indicator function equaling 1 if the condition is true and 0 otherwise. The Monte Carlo standard error (MCSE) quantifies the simulation uncertainty in each performance measure estimate</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Criterion</th>
<th style="text-align: left;">Estimate</th>
<th style="text-align: left;">MCSE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Bias</td>
<td style="text-align: left;"><span class="math inline">\frac{1}{K}\sum_{k=1}^K \hat{\theta}_k - \theta</span></td>
<td style="text-align: left;"><span class="math inline">\sqrt{\frac{1}{K(K-1)}\sum_{k=1}^K(\hat{\theta}_k - \bar{\hat{\theta}})^2}</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Variance</td>
<td style="text-align: left;"><span class="math inline">\frac{1}{K-1}\sum_{k=1}^K(\hat{\theta}_k - \bar{\hat{\theta}})^2</span></td>
<td style="text-align: left;"><span class="math inline">\sqrt{\frac{K-1}{K}}\cdot\frac{1}{K-1}\sum_{k=1}^K(\hat{\theta}_k - \bar{\hat{\theta}})^2</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">RMSE</td>
<td style="text-align: left;"><span class="math inline">\sqrt{\frac{1}{K}\sum_{k=1}^K (\hat{\theta}_k - \theta)^2}</span></td>
<td style="text-align: left;"><span class="math inline">\sqrt{\frac{K-1}{K}\sum_{j=1}^K\left(\sqrt{(\hat{\theta}_j - \theta)^2} - \overline{RMSE}\right)^2}</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Relative Bias</td>
<td style="text-align: left;"><span class="math inline">\frac{1}{\theta K}\sum_{k=1}^K \hat{\theta}_k</span></td>
<td style="text-align: left;"><span class="math inline">\frac{1}{\theta}\sqrt{\frac{1}{K(K-1)}\sum_{k=1}^K(\hat{\theta}_k - \bar{\hat{\theta}})^2}</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Relative RMSE</td>
<td style="text-align: left;"><span class="math inline">\frac{1}{\theta}\sqrt{\frac{1}{K}\sum_{k=1}^K (\hat{\theta}_k - \theta)^2}</span></td>
<td style="text-align: left;"><span class="math inline">\frac{1}{\theta}\sqrt{\frac{K-1}{K}\sum_{j=1}^K\left(\sqrt{(\hat{\theta}_j - \theta)^2} - \overline{RMSE}\right)^2}</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">Coverage</td>
<td style="text-align: left;"><span class="math inline">\frac{1}{K}\sum_{k=1}^K I(A_k \leq \theta \leq B_k)</span></td>
<td style="text-align: left;"><span class="math inline">\sqrt{\frac{c_{\beta}(1 - c_{\beta})}{K}}</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Width</td>
<td style="text-align: left;"><span class="math inline">\frac{1}{K}\sum_{k=1}^K (B_k - A_k)</span></td>
<td style="text-align: left;"><span class="math inline">\sqrt{\frac{1}{K(K-1)}\sum_{k=1}^K(W_k - \bar{W})^2}</span></td>
</tr>
</tbody>
</table>
<p><strong>Performance Criteria.</strong> Table 1 presents the performance criteria used to evaluate the ACE estimator across simulation conditions.</p>
<p><strong>Computational Details.</strong> The simulation was conducted on a MacBook Pro (Apple M4 Pro Chip), running macOS Sequoia 15.7.3. All analyses were performed in R (version 4.5.2). Parallel processing was implemented through the {doParallel} package (version 1.0.17), with {doRNG} (version 1.8.6.2) to ensure independent and reproducible random number streams. For data generation we used the {rvinecopulib} package (version 0.7.3.1.0). The estimator was implemented using the {marginaleffects} package (version 0.31.0). Data wrangling was performed with {dplyr} (version 1.1.4). Method performance was assessed through multiple metrics following the formulas from the {simhelpers} package (version 0.3.1). Figures were produced with {ggplot2} (version 4.0.1) and {cowplot} (version 1.2.0).</p>
</section>
<section class="level1">
<h1>Appendix B</h1>
</section>
<section id="apx-clarifying-the-packages-used" class="level1" data-appendixtitle="B">
<h1 data-appendixtitle="B">Clarifying the packages used</h1>
<section id="r-packages" class="level2">
<h2 data-anchor-id="r-packages">R Packages</h2>
<section id="reproducibility-infrastructure" class="level3">
<h3 data-anchor-id="reproducibility-infrastructure">Reproducibility Infrastructure</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Package</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>rix</strong></td>
<td>Generates the Nix expression (<code>default.nix</code>) for reproducible environments</td>
</tr>
</tbody>
</table>
</section>
<section id="simulation-study" class="level3">
<h3 data-anchor-id="simulation-study">Simulation Study</h3>
<p>These packages are used in the <code>Simulation_Scripts/</code> folder:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Package</th>
<th>Used in</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>rvinecopulib</strong></td>
<td><code>01_data_generation.R</code></td>
<td>Generates correlated data via copulas (<code>rbicop()</code>)</td>
</tr>
<tr class="even">
<td><strong>marginaleffects</strong></td>
<td><code>02_models.R</code></td>
<td>Computes average causal effects via <code>avg_slopes()</code></td>
</tr>
<tr class="odd">
<td><strong>doParallel</strong></td>
<td><code>03_run_simulation.R</code></td>
<td>Enables parallel <code>foreach</code> loops across CPU cores</td>
</tr>
<tr class="even">
<td><strong>doRNG</strong></td>
<td><code>03_run_simulation.R</code></td>
<td>Makes parallel RNG reproducible</td>
</tr>
<tr class="odd">
<td><strong>simhelpers</strong></td>
<td><code>04_performance_metrics.R</code></td>
<td>Calculates bias, RMSE, coverage metrics</td>
</tr>
<tr class="even">
<td><strong>ggplot2</strong></td>
<td><code>05_plots.R</code></td>
<td>Creates simulation result visualizations</td>
</tr>
<tr class="odd">
<td><strong>cowplot</strong></td>
<td><code>05_plots.R</code></td>
<td>Combines plots with <code>plot_grid()</code>, extracts legends</td>
</tr>
<tr class="even">
<td><strong>dplyr</strong></td>
<td><code>article.qmd</code></td>
<td>Data wrangling for results reported in the Table 1</td>
</tr>
</tbody>
</table>
</section>
<section id="dynamic-document-generation" class="level3">
<h3 data-anchor-id="dynamic-document-generation">Dynamic Document Generation</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Package</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>quarto</strong></td>
<td>R interface to invoke Quarto rendering</td>
</tr>
<tr class="even">
<td><strong>knitr</strong></td>
<td>Executes R code chunks in <code>.qmd</code> files</td>
</tr>
<tr class="odd">
<td><strong>svglite</strong></td>
<td>SVG graphics device; apaquarto sets <code>dev: svglite</code> for HTML output</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="latex-packages" class="level2">
<h2 data-anchor-id="latex-packages">LaTeX Packages</h2>
<section id="required-by-apaquarto-extension" class="level3">
<h3 data-anchor-id="required-by-apaquarto-extension">Required by apaquarto Extension</h3>
<p>These are loaded in apaquarto’s <code>header.tex</code> or <code>apatemplate.tex</code>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Package</th>
<th>Why apaquarto needs it</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>amsmath</strong></td>
<td>Math environments (<code>align</code>, <code>equation</code>, etc.)</td>
</tr>
<tr class="even">
<td><strong>threeparttablex</strong></td>
<td>Tables with notes below (APA table format)</td>
</tr>
<tr class="odd">
<td><strong>tcolorbox</strong></td>
<td>Callout boxes (note, warning, tip blocks)</td>
</tr>
<tr class="even">
<td><strong>fontawesome5</strong></td>
<td>Icons in callouts</td>
</tr>
<tr class="odd">
<td><strong>multirow</strong></td>
<td>Table cells spanning multiple rows</td>
</tr>
<tr class="even">
<td><strong>newtx</strong></td>
<td>Times-like fonts (default when no custom <code>mainfont</code>)</td>
</tr>
<tr class="odd">
<td><strong>geometry</strong></td>
<td>Page margins</td>
</tr>
</tbody>
</table>
</section>
<section id="dependencies-of-apaquarto-packages" class="level3">
<h3 data-anchor-id="dependencies-of-apaquarto-packages">Dependencies of apaquarto Packages</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Package</th>
<th>Dependency of</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>environ</strong></td>
<td>tcolorbox</td>
</tr>
<tr class="even">
<td><strong>pdfcol</strong></td>
<td>tcolorbox</td>
</tr>
<tr class="odd">
<td><strong>tikzfill</strong></td>
<td>tcolorbox</td>
</tr>
<tr class="even">
<td><strong>fontaxes</strong></td>
<td>newtx</td>
</tr>
<tr class="odd">
<td><strong>xstring</strong></td>
<td>Template conditionals</td>
</tr>
<tr class="even">
<td><strong>scalerel</strong></td>
<td>apa7 class</td>
</tr>
</tbody>
</table>
</section>
<section id="required-by-apa7-document-class" class="level3">
<h3 data-anchor-id="required-by-apa7-document-class">Required by apa7 Document Class</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Package</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>apa7</strong></td>
<td>The document class itself (<code>\documentclass{apa7}</code>)</td>
</tr>
<tr class="even">
<td><strong>endfloat</strong></td>
<td>Moves floats to end of document in manuscript mode</td>
</tr>
<tr class="odd">
<td><strong>threeparttable</strong></td>
<td>Dependency for threeparttablex</td>
</tr>
</tbody>
</table>
</section>
<section id="required-by-quarto-pdf-rendering" class="level3">
<h3 data-anchor-id="required-by-quarto-pdf-rendering">Required by Quarto PDF Rendering</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Package</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>framed</strong></td>
<td>Shaded/framed regions for callouts</td>
</tr>
<tr class="even">
<td><strong>fvextra</strong></td>
<td>Enhanced verbatim for syntax-highlighted code blocks</td>
</tr>
<tr class="odd">
<td><strong>fancyvrb</strong></td>
<td>Verbatim environments for code display</td>
</tr>
<tr class="even">
<td><strong>setspace</strong></td>
<td>Line spacing; also used in <code>article.qmd</code> for single-spaced code blocks</td>
</tr>
<tr class="odd">
<td><strong>anyfontsize</strong></td>
<td>Arbitrary font sizes in code blocks</td>
</tr>
</tbody>
</table>
</section>
<section id="additional-packages" class="level3">
<h3 data-anchor-id="additional-packages">Additional Packages</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Package</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ninecolors</strong></td>
<td>Extended color palettes</td>
</tr>
<tr class="even">
<td><strong>wrapfig</strong></td>
<td>Text wrapping around figures</td>
</tr>
<tr class="odd">
<td><strong>tabularray</strong></td>
<td>Modern table typesetting</td>
</tr>
<tr class="even">
<td><strong>siunitx</strong></td>
<td>SI units and number formatting</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>It is worth noting that {rix} can generate Nix expressions even without Nix installed on your system—you can write a <code>default.nix</code> file without Nix, but you cannot build or enter the resulting environment unless Nix is installed <span class="citation" data-cites="rodrigues_baumann_2025">(<a href="#ref-rodrigues_baumann_2025" role="doc-biblioref">Rodrigues &amp; Baumann, 2025</a>)</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>For an overarching information on the function <code>rix()</code>, we suggest the following {rix} documentation: <a href="https://docs.ropensci.org/rix/articles/project-environments.html" class="uri">https://docs.ropensci.org/rix/articles/project-environments.html</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>See the {rix} documentation for more: <a href="https://docs.ropensci.org/rix/articles/literate-programming.html" class="uri">https://docs.ropensci.org/rix/articles/literate-programming.html</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Although we use <em>apaquarto</em> in this example, many alternative manuscript templates are available, and Nix is agnostic to the specific template employed, provided the necessary extensions are installed.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>For example, when preparing this manuscript without the <code>--pure</code> flag, <code>quarto render</code> worked successfully. However, when using the <code>--pure</code> flag, the build failed. Running <code>quarto check</code> from within the Nix shell (i.e., <code>nix-shell --run "quarto check"</code>) revealed that Quarto was still accessing the system’s LaTeX installation (<code>/Library/TeX/texbin</code>) rather than being restricted to only what was specified in <code>default.nix</code>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>